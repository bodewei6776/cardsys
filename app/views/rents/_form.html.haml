= form_header(:title => "请填写预定信息", :link => "")
= form_for @rent, :html => {:class => "form-horizontal well order_form"} do |f|
  = f.hidden_field :locker_id
  - control_helper("num", "编号") do
    = @locker.num

  - control_helper("locker_type_in_word", "储物柜类型") do
    = @locker.locker_type_in_word


  - control_helper("is_member", "是否是会员") do
    = f.radio_button :is_member,true,:onclick=> "toggle_is_member();",:id => "is_member_radio"
    是
    = f.radio_button :is_member,false,:onclick=> "toggle_is_member();",:id => "is_member_radio"
    否
  #is_not_member_div
    - control_helper("random_member_name", "预订人") do
      = f.text_field :random_member_name
  #is_member_div
    =# render :partial => "card_info",:locals => {:rent => @rent}

  - control_helper("start_date", "起租时间") do
    = f.text_field :start_date,:class => "select-date" 

  - control_helper("end_date", "退租时间") do
    = f.text_field :end_date ,:class => "select-date" 

  - control_helper("total_fee", "租用费用") do
    = f.text_field :total_fee


  - control_helper("remark", "备注") do
    = f.text_field :remark

  - control_helper("user_name", "经手人") do
    = f.text_field :user_name,:id => "user_name", :user_autocomplete=>"/users/autocomplete_user_name"


  - control_helper("password", "密码") do
    = f.password_field :password,:id => "password"

  .form-actions
    = f.submit "#{@rent.new_record? ? "出租" : "续租"}"
    - if @rent.locker.rented?
      = f.submit "退租"

:javascript
  function toggle_is_member(){
    if($('input:radio:checked').attr('value')  == "false"){
      $('#is_not_member_div').show();
      $('#is_member_div').hide();

    }
    else{
      $('#is_not_member_div').hide();
      $('#is_member_div').show();

    }
  }

  function card_num_change(){
    var card_num = $('#card_num option:selected').text();
    var begin_date = $('#begin_date').attr('value');
    var reqest_url  = "/rents/complete_member_infos?id=" + card_num + "&start_date=" + begin_date;
    $.get(reqest_url,function(returned_data){});
  }

  $(document).ready(function(){
    rentAutocomplete();
      toggle_is_member();
      $("#begin_date").new_datepicker({dateFormat: 'yy-mm-dd',changeYear:true,changeMonth:true});
      $("#end_date").new_datepicker({dateFormat: 'yy-mm-dd',changeYear:true,changeMonth:true});

      });

